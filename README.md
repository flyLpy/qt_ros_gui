<!--
-->
## è½»é‡çº§ROS1/ROS2ç§»åŠ¨æœºå™¨äººäººæœºäº¤äº’è½¯ä»¶

![humble](https://github.com/chengyangkj/Ros_Qt5_Gui_App/actions/workflows/ros_humble_build.yaml/badge.svg)
![foxy](https://github.com/chengyangkj/Ros_Qt5_Gui_App/actions/workflows/ros_foxy_build.yaml/badge.svg)
![noetic](https://github.com/chengyangkj/Ros_Qt5_Gui_App/actions/workflows/ros_noetic_build.yaml/badge.svg)
![galactic](https://github.com/chengyangkj/Ros_Qt5_Gui_App/actions/workflows/ros_galactic_build.yaml/badge.svg)
![melodic](https://github.com/chengyangkj/Ros_Qt5_Gui_App/actions/workflows/ros_melodic_build.yaml/badge.svg)


<!-- 
<a href="https://www.bilibili.com/video/BV14h4y1w7TC">
<img alt="Static Badge" src="https://img.shields.io/badge/%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B-208647">
</a>
<a href="https://www.bilibili.com/video/BV11h4y1y74H">
<img alt="Static Badge" src="https://img.shields.io/badge/Linux%E9%83%A8%E7%BD%B2%E8%A7%86%E9%A2%91-208647">
</a>
-->


æœ¬é¡¹ç›®åŸºäºQt5å¼€å‘ï¼ŒåŸºäºCMakeè¿›è¡Œæ„å»ºï¼Œå¯ä»¥å®ç°ä¸€å¥—ä»£ç åŒæ—¶åœ¨ROS1/ROS2ç³»ç»Ÿä¸­ä½¿ç”¨(æœ¬é¡¹ç›®å·²æ¥å…¥CI,ä¿è¯å¤šROSç‰ˆæœ¬/ç³»ç»Ÿç‰ˆæœ¬å¯ç”¨æ€§)

è½¯ä»¶åœ¨ç¼–è¯‘æ—¶ä¼šè‡ªåŠ¨è¯†åˆ«ç¯å¢ƒå˜é‡ä¸­çš„ROS1/ROS2ç¯å¢ƒå¹¶è¿›è¡Œæ„å»ºï¼Œå®ç°ROSé€šä¿¡ä¸ç•Œé¢éš”ç¦»

è½¯ä»¶æ‰€æœ‰åŠŸèƒ½å‡ä¸ºè‡ªè¡Œç»˜åˆ¶å®ç°,å› æ­¤å¯ä»¥è½»æ¾è¿è¡Œåœ¨ä¸€äº›æ€§èƒ½æ¯”è¾ƒä½çš„è¾¹ç¼˜è®¾å¤‡

åŠŸèƒ½/TODO:
  
| åŠŸèƒ½                        | çŠ¶æ€ | å¤‡æ³¨                 |
| --------------------------- | ---- | -------------------- |
| ROS1/ROS2é€šä¿¡               | âœ…    |                      |
| å…¨å±€/å±€éƒ¨åœ°å›¾æ˜¾ç¤º           | âœ…    |                      |
| æœºå™¨äººå®æ—¶ä½ç½®æ˜¾ç¤º          | âœ…    |                      |
| æœºå™¨äººé€Ÿåº¦ä»ªè¡¨ç›˜            | âœ…    |                      |
| æœºå™¨äººæ‰‹åŠ¨æ§åˆ¶              | âœ…    |                      |
| æœºå™¨äººé‡å®šä½                | âœ…    |                      |
| æœºå™¨äººå•ç‚¹/å¤šç‚¹å¯¼èˆª         | âœ…    |                      |
| æœºå™¨äººå…¨å±€/å±€éƒ¨è§„åˆ’è½¨è¿¹æ˜¾ç¤º | âœ…    |                      |
| æœºå™¨äººæ‹“æ‰‘åœ°å›¾åŠŸèƒ½          | âœ…    |                      |
| ç”µæ± ç”µé‡æ˜¾ç¤º                | âœ…    |                      |
| åœ°å›¾ç¼–è¾‘åŠŸèƒ½                | âœ…    |                      |
| æœºå™¨äººå¯¼èˆªä»»åŠ¡é“¾            | âœ…    |                      |
| åœ°å›¾åŠ è½½                    | âœ…    |                      |
| åœ°å›¾ä¿å­˜                    | âœ…    |                      |
| ç›¸æœºå›¾åƒæ˜¾ç¤º                | âœ…    | ç§»æ¤è‡ªrqt_image_view |
| æœºå™¨äººè½¦èº«è½®å»“æ˜¾ç¤º          | âœ…    | æ”¯æŒé…ç½®å¼‚å½¢è½¦èº«     |
| æ˜¾ç¤ºç‚¹äº‘å›¾åƒ                | âœ…    |                     |
| æ˜¾ç¤ºä¼ æ„Ÿå™¨çŠ¶æ€ä¿¡æ¯          | âœ…    |                     |
| å»ºå›¾åŠŸèƒ½                    | âœ…    | éœ€è¦æ›´æ”¹ä¸ºè‡ªå·±çš„æœºå™¨äººå»ºå›¾å‘½ä»¤ |
| åŸºäºrosbridgeçš„é€šä¿¡         | âœ    |       æ­£åœ¨å®Œæˆ             |


## é¡¹ç›®æˆªå›¾

![image.png](./doc/images/1.jpg)

![image.png](./doc/images/2.jpg)

![image.png](./doc/images/main.gif)


# ä¸€,Release ç‰ˆæœ¬ä¸‹è½½ä½¿ç”¨

å¦‚æœæ‚¨åªæƒ³ä½¿ç”¨æœ¬è½¯ä»¶,å¹¶ä¸æƒ³äº†è§£å…·ä½“çš„ä»£ç å®ç°,ç”¨æˆ·å¯ä»¥é€‰æ‹©ä¸‹è½½ç¼–è¯‘å¥½çš„Releaseç‰ˆæœ¬ï¼Œä¸ç”¨è‡ªè¡Œæ‰‹åŠ¨ç¼–è¯‘,ä¸‹è½½å³ç”¨

ä½¿ç”¨Releaseç‰ˆæœ¬çš„å‰æ:==ç³»ç»ŸROSç¯å¢ƒå·²å®‰è£…,å¹¶ä¸”sourceåˆ°ç¯å¢ƒå˜é‡ä¸­==

æœ¬ä»“åº“ä½¿ç”¨CIè‡ªåŠ¨ç”Ÿæˆå„å¹³å°çš„Releaseç‰ˆæœ¬(ç›®å‰åªæœ‰X86_64ç‰ˆæœ¬,Armç¯å¢ƒéœ€è¦è‡ªè¡Œç¼–è¯‘),åœ¨é¡¹ç›®çš„[Releaseé¡µé¢](https://github.com/chengyangkj/Ros_Qt5_Gui_App/releases)ä¸‹è½½æœ€æ–°å¯¹åº”ROSç‰ˆæœ¬çš„Releaseç‰ˆæœ¬ï¼Œç†è®ºä¸Šè§£å‹åå³å¯ä½¿ç”¨ã€‚
ä½¿ç”¨æ–¹æ³•:
åœ¨ç»ˆç«¯è¿›å…¥è§£å‹åçš„æ–‡ä»¶å¤¹è·¯å¾„,æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤:

```
sudo chmod a+x ./ros_qt5_gui_app
./ros_qt5_gui_app
```
å¦‚æœReleaseç‰ˆæœ¬ä¸‹è½½åä½¿ç”¨ä¸äº†ï¼Œå¯ä»¥å‚è€ƒ[äºŒ,ç¼–è¯‘](#äºŒç¼–è¯‘)è¿›è¡Œè‡ªè¡Œç¼–è¯‘ä½¿ç”¨

# äºŒ,ç¼–è¯‘



>ğŸ’¡ æ³¨æ„ï¼Œä¸ºäº†ä¿è¯æ­¤é¡¹ç›®åŒæ—¶å…¼å®¹ROS1ä¸ROS2ï¼Œæ­¤é¡¹ç›®ä¸ä½¿ç”¨ROS1/ROS2çš„catkin_make/colconæ„å»ºç³»ç»Ÿè¿›è¡Œå¤Ÿå»ºï¼Œè€Œæ˜¯ä½¿ç”¨æ ‡å‡†CMakeè¿›è¡Œæ„å»ºï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œæœ¬é¡¹ç›®ä¸ä¼šè¢«ROSè‡ªåŠ¨è¯†åˆ«ä¸ºåŠŸèƒ½åŒ…
å¯ä»¥å‚è€ƒä»¥ä¸‹æ•™ç¨‹ä»0å¼€å§‹æ„å»º/è¿è¡Œæ­¤é¡¹ç›®:

## 1,ç¯å¢ƒå®‰è£… 

ç†è®ºä¸Šåªéœ€è¦å®‰è£…å¦‚ä¸‹åŸºç¡€åŒ…å°±å¯ä»¥ç¼–è¯‘æ­¤é¡¹ç›®:

```
sudo apt-get update
sudo apt-get install qtbase5-private-dev libqt5svg5-dev libsdl-image1.2-dev libsdl1.2-dev -y
```

å¦‚æœä»¥ä¸Šå®‰è£…åè¿˜ä¸è¡Œï¼Œå¯ä»¥æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤å®‰è£…å…¨éƒ¨ä¾èµ–:

```
sudo apt-get install qtbase5-dev qt5-qmake qtbase5-dev-tools libqt5svg5-dev qtbase5-private-dev libeigen3-dev libgtest-dev libsdl-image1.2-dev libsdl1.2-dev -y
```

## 2,å…‹éš†/ä¸‹è½½æœ¬é¡¹ç›®:


```
mkdir -p ~/qt_ws
cd ~/qt_ws
git clone https://github.com/chengyangkj/Ros_Qt5_Gui_App
```

note:å¦‚æœgithubä¸‹è½½è¿‡æ…¢,å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ä»giteeæ‹‰å–

```
git clone https://gitee.com/chengyangkj/Ros_Qt5_Gui_App

```

## 3,ç¼–è¯‘é¡¹ç›®

å¯ä»¥æ‰‹åŠ¨æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤è¿›è¡Œç¼–è¯‘(ä¼šæ ¹æ®ç¯å¢ƒå˜é‡è‡ªåŠ¨è¯†åˆ«ROS1è¿˜æ˜¯ROS2ç¯å¢ƒ):
```
cd ~/qt_ws/ROS2_Qt5_Gui_App
mkdir -p build
cd build
cmake ..
make

```
æˆ–è€…æ‰§è¡Œå¦‚ä¸‹è„šæœ¬æ‰‹åŠ¨æŒ‡å®šROSç‰ˆæœ¬å¹¶è¿›è¡Œä¸€é”®ç¼–è¯‘:

```
cd ~/qt_ws/ROS2_Qt5_Gui_App

```
ROS1:

```
sh ./build_ros1.sh

```
ROS2

```
sh ./build_ros2.sh
```
## 4,è¿è¡Œé¡¹ç›®

```
cd ~/qt_ws/ROS2_Qt5_Gui_App/build
./ros_qt5_gui_app

```

è½¯ä»¶é…ç½®æ–‡ä»¶è·¯å¾„(è¿è¡Œä¸€æ¬¡è½¯ä»¶åä¼šè‡ªåŠ¨ç”Ÿæˆåœ¨å¯æ‰§è¡Œç¨‹åºç›¸å¯¹è·¯å¾„ä¸‹)

# ä¸‰,IDEé…ç½®è¯´æ˜(QtCreator/Vscode)


>ğŸ’¡  æ­¤éƒ¨åˆ†ä¸ºé’ˆå¯¹æ–°æ‰‹åšçš„æ¸©é¦¨æç¤º,å¦‚æœä½ å·²ç»æ˜¯ä¸€ä¸ªROS/C++/Qtè€æ‰‹,å¯ä»¥è·³è¿‡æ­¤éƒ¨åˆ†


å¾ˆå¤šROSåˆå­¦è€…å­¦ä¹ Qtéƒ½å­˜åœ¨ä¸€ä¸ªè¯¯åŒº:æ²¡æœ‰ææ¸…æ¥šIDEä¸ç¼–è¯‘å™¨çš„åŒºåˆ«ï¼ŒåƒQtCreatorï¼ŒVscodeï¼ŒCLionä¹‹ç±»çš„å‡ä¸ºIDEï¼ˆ[ä»€ä¹ˆæ˜¯IDE](https://www.zhihu.com/question/24833708)ï¼‰
å“ªæ€•ä¸ç”¨IDEï¼Œæˆ‘ä»¬åªç”¨æ–‡æœ¬ç¼–è¾‘å™¨ä¹Ÿèƒ½å®ç°ä»£ç çš„ç¼–å†™(æ•ˆç‡å¾ˆä½ï¼Œæ²¡æœ‰ä»£ç æç¤º)ï¼Œç¼–å†™ä¹‹åä½¿ç”¨makeæŒ‡ä»¤ç¼–è¯‘å³å¯

å®é™…ä¸ŠUbuntuç³»ç»Ÿé»˜è®¤éƒ½è‡ªå¸¦çš„æœ‰Qtåº“,å°±æ¯”å¦‚å‰é¢çš„[3,ç¼–è¯‘é¡¹ç›®](#3ç¼–è¯‘é¡¹ç›®),å¹¶æ²¡æœ‰è¦æ±‚å®‰è£…QtCreator,åªéœ€è¦ä½¿ç”¨apt-getå®‰è£…ä¸€äº›ç³»ç»Ÿç¼ºå¤±çš„,æ²¡æœ‰é»˜è®¤å®‰è£…çš„qtåº“,å°±èƒ½æ­£å¸¸ç¼–è¯‘é€šè¿‡

å½“ç„¶å®‰è£…QtCreatoræ—¶ä¹Ÿä¼šåŒæ—¶ä¸‹è½½ä¸€äº›Qtåº“,ä½†æ˜¯ä»–ä»…ä»…æ˜¯ä¸‹è½½,å¦‚æœä½ æ²¡æœ‰å°†ä¸‹è½½çš„åº“æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­(é€šå¸¸ä¹Ÿä¸å»ºè®®è‡ªå·±å°†ä¸‹è½½çš„qtåº“æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­,è¿™æ ·éœ€è¦å¤„ç†ç³»ç»Ÿé»˜è®¤çš„qtåº“ä¸ä½ æ·»åŠ çš„qtåº“çš„å†²çªé—®é¢˜),æ‰€ä»¥,åœ¨æ²¡æœ‰é¢å¤–é…ç½®çš„æƒ…å†µä¸‹,è™½ç„¶ä¸‹è½½äº†QtCreator,ä½†æ˜¯åœ¨ç¼–è¯‘ä»£ç æ—¶ç”¨çš„è¿˜æ˜¯ç³»ç»Ÿé»˜è®¤çš„åº“.

é‚£ä¹ˆ,æˆ‘ä»¬ä¸ºä»€ä¹ˆè¿˜è¦å»é¢å¤–ä¸‹è½½QtCreatorå‘¢?

å› ä¸ºæˆ‘ä»¬éœ€è¦ä½¿ç”¨QtCreatorå»ç¼–è¾‘æˆ‘ä»¬çš„(.ui),(.resource)æ–‡ä»¶ï¼ŒåŒæ—¶QtCreatorè¿˜æä¾›äº†ä»£ç æç¤ºï¼Œä»£ç è·³è½¬ç­‰åŠŸèƒ½ã€‚ä½†æ˜¯è¿™äº›åŠŸèƒ½ï¼Œåªè¦æ˜¯IDEå‡æœ‰è¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬é€šè¿‡Vscode/Clionå®‰è£…ä¸€äº›æ’ä»¶ï¼Œä¹Ÿæ˜¯èƒ½å¤Ÿå®ç°è¿™äº›åŠŸèƒ½ï¼Œåªæ˜¯QtCreatorå¯¹è‡ªå®¶çš„è¯­è¨€æ”¯æŒçš„æ¯”è¾ƒå¥½ï¼Œæ¯”è¾ƒæ–¹ä¾¿

æœ¬é¡¹ç›®æ‰€æœ‰çš„ç•Œé¢,éƒ½æ˜¯åœ¨ä»£ç ä¸­å»æ‰‹åŠ¨åˆ›å»º,å¦‚æœæ‰“å¼€ä»£ç ä¸­çš„mainwindow.uiå¯ä»¥å‘ç°ä»€ä¹ˆéƒ½æ²¡æœ‰,å› ä¸ºæ‰€æœ‰ç•Œé¢éƒ½æ˜¯ä»£ç åŠ¨æ€åˆ›å»ºæ·»åŠ ä¸Šå»çš„.

æœ¬äººåœ¨å¼€å‘æœ¬é¡¹ç›®çš„æµç¨‹ä¸º:
 - ä½¿ç”¨ç³»ç»Ÿçš„Qtåº“,å¦‚æœéœ€è¦ä½¿ç”¨çš„qtåº“ä¸å­˜åœ¨,åˆ™ä½¿ç”¨apt-getå®‰è£…å³å¯
 - æ‰€æœ‰uiç•Œé¢å‡ä½¿ç”¨ä»£ç åŠ¨æ€åˆ›å»º,å¹¶æ·»åŠ åˆ°ä¸»çª—å£ä¸­,æ²¡æœ‰ä½¿ç”¨qtcreatoræ‹–æ‹½ç”Ÿæˆ
 - é¡¹ç›®çš„å¼€å‘IDEä½¿ç”¨vscode,ä»…å®‰è£…äº†åŸºç¡€çš„c/c++æ’ä»¶åšä»£ç æç¤º
 - å¦‚æœéœ€è¦ç¼–è¾‘èµ„æºæ–‡ä»¶(.qrc),æ‰‹åŠ¨æ‰“å¼€qtcreator,å†æ‰“å¼€qrcæ–‡ä»¶è¿›è¡Œç¼–è¾‘ä¿å­˜
 - ç¼–è¯‘æ—¶åœ¨ç»ˆç«¯ä½¿ç”¨makeæŒ‡ä»¤è¿›è¡Œç¼–è¯‘
 - è¿è¡Œæ—¶åœ¨ç»ˆç«¯ä½¿ç”¨./ros_qt5_gui_appæŒ‡ä»¤è¿›è¡Œè¿è¡Œ

å¯ä»¥å‘ç°,å¼€å‘æ­¤é¡¹ç›®åªæœ‰éœ€è¦ç¼–è¾‘èµ„æºæ–‡ä»¶æ—¶æ‰ä¼šç”¨åˆ°QtCreator(ä¸€èˆ¬å›¾ç‰‡æ·»åŠ ä¸Šå»åä¹Ÿä¸ä¼šåšé¢‘ç¹çš„ç¼–è¾‘)

è™½ç„¶æœ¬äººå¼€å‘ä½¿ç”¨çš„Vscode,ä½†æ˜¯ä¸ºäº†æ–¹ä¾¿éƒ¨åˆ†ä¹ æƒ¯ä½¿ç”¨QtCreatoråšå¼€å‘çš„ç”¨æˆ·,è¿™é‡Œä»‹ç»ä¸‹å¦‚æœä½¿ç”¨QtCreatorä½œä¸ºIDEå¼€å‘æ­¤é¡¹ç›®:

### 3.1 QtCreatoræ‰“å¼€é¡¹ç›®æ•™ç¨‹

é¦–å…ˆéœ€è¦æŒ‰ç…§[3,ç¼–è¯‘é¡¹ç›®](#3ç¼–è¯‘é¡¹ç›®)å°†é¡¹ç›®æˆåŠŸç¼–è¯‘,å¦‚æœç¼–è¯‘å¤±è´¥,åˆ™QtCreatoræ‰“å¼€åé¡¹ç›®ä¸ä¼šæ­£å¸¸å±•å¼€

æœ¬é¡¹ç›®ä¸ºæ ‡å‡†CMakeé¡¹ç›®,å› æ­¤æŒ‰ç…§åœ¨QtCreatorä¸­æ‰“å¼€CMakeé¡¹ç›®çš„æ–¹å¼,æ‰“å¼€æœ¬é¡¹ç›®çš„æ ¹ç›®å½•Cmakelist.txtå³å¯(ä¸åŒºåˆ†ROS1/ROS2)

- 1.å®‰è£…QtCreator

```
sudo apt-get install qtcreator

```
- 2.æ‰“å¼€qtcreator

ç»ˆç«¯è¾“å…¥(å¿…é¡»ç»ˆç«¯æ‰“å¼€):

```
qtcretor
```
æ‰“å¼€åé€‰æ‹©æ–‡ä»¶->æ‰“å¼€æ–‡ä»¶æˆ–é¡¹ç›®:

![image.png](./doc/images/qtcreator/step1.jpg)

æ¥ç€é€‰æ‹©é¡¹ç›®==æ ¹ç›®å½•==ä¸‹çš„Cmakelist.txtæ–‡ä»¶,ç‚¹å‡»æ‰“å¼€å³å¯:

![image.png](./doc/images/qtcreator/step2.jpg)

æ¥ç€ä¼šè‡ªåŠ¨è¯†åˆ«æˆ‘ä»¬å‰é¢ç¼–è¯‘çš„buildç›®å½•,é€‰æ‹©config:

![image.png](./doc/images/qtcreator/step3.jpg)

é¡¹ç›®æˆåŠŸå±•å¼€,ç‚¹å‡»ç»¿è‰²ä¸‰è§’å½¢ç¼–è¯‘å¹¶è¿è¡Œ:

![image.png](./doc/images/qtcreator/step4.jpg)

# å››,ä½¿ç”¨è¯´æ˜

### 4.1,å¤šæœºé€šä¿¡é…ç½®

>ğŸ’¡  é’ˆå¯¹äºROSæ–°æ‰‹çš„æ¸©é¦¨æç¤º:æ­¤é¡¹é…ç½®,å¦‚æœæ˜¯å•æœºä½¿ç”¨å³æœ¬è½¯ä»¶è¿è¡Œåœ¨æœºå™¨äººèº«ä¸Š,æ²¡æœ‰è·¨æœºå™¨ä½¿ç”¨å°±ä¸ç”¨é…ç½®ï¼Œç›´æ¥è·³è¿‡å³å¯.å¦‚æœéœ€è¦å°†æœ¬è½¯ä»¶è¿è¡Œåœ¨è‡ªå·±çš„ç¬”è®°æœ¬ä¸Š,å»è¿æ¥è¿œç¨‹çš„æœºå™¨äººçš„æƒ…å†µä¸‹éœ€è¦è¿›è¡Œé…ç½®


ROS1/ROS2çš„å¤šæœºé€šä¿¡å®Œå…¨ä¾èµ–ROSåŸç”Ÿ(ç¯å¢ƒå˜é‡æ·»åŠ ROS_MASTER_URIä¸ROS_IP/ROS_DOMAINID),ä¸å†ç”±ç”¨æˆ·æ‰‹åŠ¨æŒ‡å®š,å‡è½»æ–°æ‰‹ä½¿ç”¨è´Ÿæ‹…

ROS1:

é…ç½®å‚è€ƒï¼šå¤šæœºé€šè®¯æ•™ç¨‹[csdn åšå®¢](https://blog.csdn.net/qq_38441692/article/details/98205852)

ROS2:

ç¯å¢ƒå˜é‡å¤šæœºé…ç½®ç›¸åŒçš„ROS_DOMAINID

### 4.2,é…ç½®æ–‡ä»¶

ç¬¬ä¸€æ¬¡è¿è¡Œåï¼Œä¼šåœ¨å¯æ‰§è¡Œç¨‹åºåŒçº§ç›®å½•ç”Ÿæˆconfig.json,ä¿®æ”¹æ­¤é…ç½®æ–‡ä»¶å³å¯(éœ€è¦æ³¨æ„Jsonæ ¼å¼),ä¿®æ”¹åé‡å¯ç”Ÿæ•ˆ,å…·ä½“é…ç½®è¯´æ˜è¯¦è§å„åŠŸèƒ½çš„é…ç½®è¯´æ˜


### 4.3,é‡å®šä½ä½å§¿æ€å‘å¸ƒ

ç¨‹åºå¯ä»¥æ‹–åŠ¨å¼çš„è®¾ç½®æœºå™¨äººåˆå§‹ä½ç½®ï¼ˆé‡å®šä½ï¼‰,ç›¸å¯¹äºRviz,æ‹–åŠ¨æ—¶å¯ä»¥å®æ—¶æŸ¥çœ‹æ¿€å…‰åŒ¹é…æƒ…å†µ,é‡å®šä½æ›´åŠ ç²¾å‡†(å·¦é”®æŒ‰ä½æ‹–åŠ¨,å³é”®æ—‹è½¬æ–¹å‘)

![image.png](./doc/images/reloc.png)

![image.png](./doc/images/reloc.gif)

æ³¨æ„:å¦‚æœè®¾ç½®æ— æ•ˆ,éœ€è¦æ£€æŸ¥config.jsonä¸­è®¾ç½®ï¼š

```
{
      "display_name": "Reloc",
      "topic": "/initialpose",
      "enable": true
}
```
ä¸ºè‡ªå·±æœºå™¨äººç›‘å¬çš„é‡å®šä½Topicåç§°


### 4.4,åœ°å›¾ç¼–è¾‘

ç¨‹åºæ”¯æŒåœ°å›¾ç¼–è¾‘åŠŸèƒ½:

![image.png](./doc/images/edit_map.png)
![image.png](./doc/images/edit_map2.png)

#### 4.4.1 æ‹“æ‰‘åœ°å›¾(æœºå™¨äººå¯¼èˆªç‚¹è®¾ç½®)
å¹¶ä¸”ç¨‹åºæ”¯æŒæ‹“æ‰‘åœ°å›¾åŠŸèƒ½,å¯ä»¥æ‹–åŠ¨å¼çš„è®¾ç½®æœºå™¨äººå¯¼èˆªç›®æ ‡ç‚¹ï¼ˆå¯¼èˆªï¼‰ä½¿ç”¨gifè¯´æ˜å¦‚ä¸‹:

![image.png](./doc/images/set_nav_goal.gif)

æ³¨æ„:å¦‚æœå¯¼èˆªç‚¹ä½å‘å¸ƒæ— å“åº”è®¾ç½®æ— æ•ˆ,éœ€è¦æ£€æŸ¥config.jsonä¸­è®¾ç½®ï¼š

```
{
      "display_name": "NavGoal",
      "topic": "/move_base_simple/goal",
      "enable": true
}
```
ä¸ºè‡ªå·±æœºå™¨äººç›‘å¬çš„å¯¼èˆªç›®æ ‡ç‚¹Topicåç§°

#### 4.4.2 æ©¡çš®æ“¦

ç‚¹å‡»æ©¡çš®æ“¦å,å¯ä»¥æ“¦é™¤åœ°å›¾ä¸­çš„éšœç¢ç‰©,ä½¿ç”¨gifè¯´æ˜å¦‚ä¸‹:
![image.png](./doc/images/erase.gif)

#### 4.4.3 ç”»ç¬”
ç”»ç¬”åŠŸèƒ½
![image.png](./doc/images/pencil.gif)

#### 4.4.4 çº¿æ®µç»˜åˆ¶
çº¿æ®µç»˜åˆ¶
![image.png](./doc/images/draw_line.gif)

#### 4.4.5 åœ°å›¾ä¿å­˜

åœ°å›¾ç¼–è¾‘å®Œæˆåå¹¶ä¸ä¼šè‡ªåŠ¨ä¿å­˜,éœ€è¦ç‚¹å‡»ä¿å­˜æŒ‰é’®,ä¿å­˜åœ°å›¾åˆ°æŒ‡å®šæ–‡ä»¶å¤¹,å¦‚æœéœ€è¦åœ¨ROSä¸­ä½¿ç”¨ï¼Œéœ€è¦å°†è¯¥åœ°å›¾æ›¿æ¢åˆ°è‡ªå·±å¯¹åº”å¯¼èˆªåŒ…çš„mapä¸­

ç›®å‰ä¿å­˜åœ°å›¾æœ‰å¦‚ä¸‹:

- *.pgm å›¾ç‰‡æ•°æ®
- *.yaml åœ°å›¾æè¿°æ–‡ä»¶
- *.topology ç¨‹åºè‡ªå®šä¹‰çš„æ‹“æ‰‘åœ°å›¾ ä¿å­˜äº†ç‚¹ä½ç­‰ä¿¡æ¯

![image.png](./doc/images/save_map.png)

#### 4.4.6 åœ°å›¾åŠ è½½

åœ°å›¾åŠ è½½åŒç† ç”¨æˆ·é€‰æ‹©å¯¹åº”çš„PGMåœ°å›¾æ–‡ä»¶å³å¯åŠ è½½ï¼Œå¹¶è¿›è¡Œç¼–è¾‘

### 4.5,æ‰‹åŠ¨æ§åˆ¶æœºå™¨äºº

è½¯ä»¶æ”¯æŒå‘å¸ƒå®æ—¶é€Ÿåº¦åˆ°åº•ç›˜:

![image.png](./doc/images/manual_control.jpg)

å¯¹åº”æŒ‰é’®ä¸Šçš„æ–‡å­—ï¼Œå¯ä»¥ç”±é”®ç›˜å¯¹åº”æŒ‰é’®åŒæ­¥è°ƒç”¨

æ³¨æ„:å¦‚æœè®¾ç½®æ— æ•ˆ,éœ€è¦æ£€æŸ¥config.jsonä¸­è®¾ç½®ï¼š

```
{
      "display_name": "Speed",
      "topic": "/cmd_vel",
      "enable": true
}

```
ä¸ºå®é™…æœºå™¨äººç›‘å¬çš„é€Ÿåº¦æ§åˆ¶è¯é¢˜

### 4.6,é€Ÿåº¦ä»ªè¡¨ç›˜

è½¯ä»¶æ”¯æŒå®æ—¶æ˜¾ç¤ºæœºå™¨äººé€Ÿåº¦:

![image.png](./doc/images/speed_dashboard.jpg)

æ³¨æ„:å¦‚æœè®¾ç½®æ— æ•ˆ,éœ€è¦æ£€æŸ¥config.jsonä¸­è®¾ç½®ï¼š

```
{
      "display_name": "Odometry",
      "topic": "/odom",
      "enable": true
}
```

ä¸ºæœºå™¨äººæ—¶æœºå‘å¸ƒçš„é‡Œç¨‹è®¡è¯é¢˜

### 4.7,ç”µæ± ç”µé‡æ˜¾ç¤º

è½¯ä»¶æ”¯æŒå®æ—¶æ˜¾ç¤ºæœºå™¨äººç”µé‡,åœ¨é…ç½®ä¸­é…ç½®è¯é¢˜åï¼Œç”µæ± ç”µé‡çš„Topicç±»å‹ä¸º:sensor_msgs::BatteryState

```
{
      "display_name": "Battery",
      "topic": "/battery",
      "enable": true
}
```
![image.png](./doc/images/battery_state.png)

### 4.8 å¤šç‚¹è¿ç»­å¯¼èˆª

è½¯ä»¶æ”¯æŒå¤šç‚¹è¿ç»­å¯¼èˆª,ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹:

![image.png](./doc/images/multi_nav.png)

ç‚¹å‡»Start Task Chainå³å¯å¼€å§‹ä»»åŠ¡:

![image.png](./doc/images/main.gif)

### 4.9,ç›¸æœºå›¾ç‰‡æ˜¾ç¤º

è½¯ä»¶æ”¯æŒå®æ—¶æ˜¾ç¤ºæœºå™¨äººç›¸æœºå›¾ç‰‡,åœ¨é…ç½®ä¸­é…ç½®è¯é¢˜ååŠlocation:

```
  "images": [ ], //å›¾ç‰‡åˆ—è¡¨ æ”¯æŒå¤šè·¯ é…ç½®åè‡ªåŠ¨åˆ›å»ºç•Œé¢

```

è½¯ä»¶ç§»æ¤äº†rqt image viewçš„å›¾ç‰‡æ˜¾ç¤ºåŠŸèƒ½,æ”¯æŒå®æ—¶æ˜¾ç¤ºå¤šè·¯æœºå™¨äººç›¸æœºå›¾ç‰‡,åœ¨é…ç½®ä¸­é…ç½®è¯é¢˜å

é…ç½®demo:

```

  "images": [
    {
      "location": "front",
      "topic": "/camera/rgb/image_raw",
      "enable": true
    },
    {
      "location": "front/depth",
      "topic": "/camera/depth/image_raw",
      "enable": true
    }
  ],

```

![image.png](./doc/images/show_image.png)

![image.png](./doc/images/show_image.gif)


### 4.10,æœºå™¨äººè½¦èº«è½®å»“æ˜¾ç¤º

è½¦èº«å°ºå¯¸ä½äºé…ç½®:"robot_shape_config":

``` 

  "robot_shape_config": {
    "shaped_points": [],  //è½®å»“ç‚¹
    "is_ellipse": false,  //è½®å»“æ˜¯å¦ä¸ºæ¤­åœ†
    "color": "0x0000FF",   //è½®å»“å¡«å……é¢œè‰²
    "opacity": 0.5     //è½®å»“é€æ˜åº¦
  }

```

é…ç½®å‰ï¼Œé¦–å…ˆéœ€è¦ä»¥è½¦ä¸­å¿ƒä¸ºåŸç‚¹ï¼Œä½¿ç”¨å¦‚ä¸‹åæ ‡ç³»è®¡ç®—è½¦èº«è½®å»“çš„æ¯ä¸ªç‚¹(å•ä½m)ï¼Œæ”¯æŒå¼‚å½¢è½¦èº«:

```

                    ^x
                    |
                    |
                    |
          (0.5,0.5) |     (0.5,-0.5)
            +---------------+
            |       |       |
            |       |       |
            |       |       |
<----------------------------------------+
y           |       |       |
            |       |       |
            |       |       |
            |       |       |
            +---------------+
        (-0.5,0.5)  |       (-0.5,-0.5)
                    |
                    |


```

éšæ„æ‰¾ä¸€ä¸ªç‚¹ä½œä¸ºèµ·å§‹ç‚¹,æŒ‰ç…§é¡ºæ—¶é’ˆ,ä¾æ¬¡å¡«ä¸‹æ¯ä¸ªç‚¹

é…ç½®demo:

- 1m*1mè½¦èº«:

```
  "robot_shape_config": {
    "shaped_points": [
      {
        "x": 0.5,
        "y": 0.5
      },
      {
        "x": 0.5,
        "y": -0.5
      },
      {
        "x": -0.5,
        "y": -0.5
      },
      {
        "x": -0.5,
        "y": 0.5
      }
    ],
    "is_ellipse": false,
    "color": "0x00000FF",
    "opacity": 0.5
  }

```

![image.png](./doc/images/shape1.png)

- 1m*1m åœ†å½¢è½¦èº«:

is_ellipse=true

```
  "robot_shape_config": {
    "shaped_points": [
      {
        "x": 0.5,
        "y": 0.5
      },
      {
        "x": 0.5,
        "y": -0.5
      },
      {
        "x": -0.5,
        "y": -0.5
      },
      {
        "x": -0.5,
        "y": 0.5
      }
    ],
    "is_ellipse": true,
    "color": "0x00000FF",
    "opacity": 0.5
  }

```
![image.png](./doc/images/shape_cicle.png)

- å¼‚å½¢è½¦èº«:
  
```
  "robot_shape_config": {
    "shaped_points": [
      {
        "x": 0.5,
        "y": 0.5
      },
      {
        "x": 1,
        "y": 0
      },
      {
        "x": 0.5,
        "y": -0.5
      },
      {
        "x": -0.5,
        "y": -0.5
      },
      {
        "x": -0.5,
        "y": 0.5
      }
    ],
    "is_ellipse": false,
    "color": "0x00000FF",
    "opacity": 0.5
  }

```

![image.png](./doc/images/shape2.png)


### 4.11,ä¼ æ„Ÿå™¨çŠ¶æ€æ˜¾ç¤º
è½¯ä»¶å®ç°äº†ä¼ æ„Ÿå™¨çŠ¶æ€æ˜¾ç¤ºåŠŸèƒ½ï¼Œè¿™ä¸ªç•Œé¢å¯ä»¥æ ¹æ®å±å¹•å¤§å°è‡ªåŠ¨ç¼©æ”¾

![image.png](./doc/images/status.jpg)


### 4.12,å»ºå›¾åŠŸèƒ½
è½¯ä»¶å®ç°äº†å»ºå›¾åŠŸèƒ½å’ŒåŠ è½½å»ºå›¾ç»“æŸåæ˜¾ç¤ºä¸Šæ¬¡å»ºçš„å›¾çš„ç‚¹äº‘åŠŸèƒ½


![image.png](./doc/images/dianyun.jpg)

å¼€å§‹å»ºå›¾çš„åŠŸèƒ½æ˜¯é€šè¿‡begin_mappingå’Œend_mappingä¸¤ä¸ªæ§½å‡½æ•°å®ç°ï¼Œå¦‚æœæƒ³è¦åœ¨å…¶ä»–è®¾å¤‡ä¸Šè¿è¡Œï¼Œ
éœ€è¦å…ˆåœ¨è‡ªå·±ç”µè„‘ä¸Šé…ç½®sshå…å¯†ç™»é™†åŠŸèƒ½ï¼Œåœ¨å°†æ§½å‡½æ•°ä¸­çš„sshè¿æ¥çš„ç”¨æˆ·åï¼Œipåœ°å€ä»¥åŠå»ºå›¾çš„
æŒ‡ä»¤ä¿®æ”¹ä¸€ä¸‹ï¼ŒåŠ è½½ç‚¹äº‘åŠŸèƒ½éœ€è¦å°†åœ°å€ä¿®æ”¹ä¸ºä¸Šæ¬¡å»ºå®Œå›¾åä¿å­˜çš„åœ°å€ï¼ŒåŠ è½½ç‚¹äº‘åŠŸèƒ½åœ¨loadAndShowPCD
å‡½æ•°ä¸­å®ç°

###rosbridge åŠŸèƒ½æ­£åœ¨å®ç°ä¸­



åŸæ–‡é“¾æ¥ï¼šhttps://github.com/chengyangkj/Ros_Qt5_Gui_App

